name       : mupdf
version    : 1.17.0
release    : 3
source     :
    - https://github.com/ArtifexSoftware/mupdf/archive/1.17.0.tar.gz : 86bf76f88335cfe494ecb753ac8d714def3824718a815b0b42bce7e2dcefaf8d
homepage   : https://mupdf.com/
license    : AGPL-3.0-or-later
component  : office.viewers
summary    : lightweight PDF, XPS, and E-book viewer
description: |
    MuPDF is a lightweight PDF, XPS, and E-book viewer.
    MuPDF consists of a software library, command line tools, and viewers for various platforms.
    The renderer in MuPDF is tailored for high quality anti-aliased graphics. It renders text with metrics and spacing accurate to within fractions of a pixel for the highest fidelity in reproducing the look of a printed page on screen.
    The viewer is small, fast, yet complete. It supports many document formats, such as PDF, XPS, OpenXPS, CBZ, EPUB, and FictionBook 2. You can annotate PDF documents and fill out forms with the mobile viewers (this feature is coming soon to the desktop viewer as well).
    The command line tools allow you to annotate, edit, and convert documents to other formats such as HTML, SVG, PDF, and CBZ. You can also write scripts to manipulate documents using Javascript.
libsplit   : false
builddeps  :
    - pkgconfig(freetype2)
    - pkgconfig(glu)
    - pkgconfig(glut)
    - pkgconfig(harfbuzz)
    - pkgconfig(jbig2dec)
    - pkgconfig(lcms2)
    - pkgconfig(libcurl)
    - pkgconfig(libopenjp2)
    - pkgconfig(libturbojpeg)
    - pkgconfig(mujs)
setup      : |
    %patch -p1 < $pkgfiles/0001-shared_libs-1.patch
build      : |
    rm -rf thirdparty/
    %make USE_SYSTEM_LIBS=yes
install    : |
    %make_install prefix=/usr USE_SYSTEM_LIBS=yes
    install -Dm 00644 docs/logo/mupdf.png $installdir/usr/share/pixmaps/mupdf.png
    install -Dm 00644 $pkgfiles/mupdf.desktop $installdir/usr/share/applications/mupdf.desktop
    rm -rf $installdir/usr/lib/libmupdf-third.so
